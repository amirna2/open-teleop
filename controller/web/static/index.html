<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open Teleop Admin Dashboard</title>
    <!-- Main and component-specific stylesheets -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/teleop.css">
    <link rel="stylesheet" href="css/config.css">
</head>
<body>
    <!-- Dashboard Header -->
    <header class="dashboard-header">
        <h1>Open Teleop Admin Dashboard</h1>
        <div class="system-status">
            <div class="status-item">
                <span class="status-label">System:</span>
                <span id="system-status" class="status-value">Initializing...</span>
            </div>
            <div class="status-item">
                <span class="status-label">Video:</span>
                <span id="video-status-header" class="status-value">Disconnected</span>
            </div>
            <div class="status-item">
                <span class="status-label">Control:</span>
                <span id="control-status-header" class="status-value">Disconnected</span>
            </div>
        </div>
    </header>

    <!-- Main Dashboard Grid -->
    <main class="dashboard-grid">
        <!-- Video Feed Section -->
        <section class="video-section">
            <h2>Video Stream</h2>
            <div id="video-container">
                <video id="video-player" controls muted autoplay playsinline>
                    Your browser does not support the video tag.
                </video>
                <div id="video-status">Video: Disconnected</div>
                <div id="video-info">
                    <span id="video-resolution">Resolution: --</span>
                    <span id="video-codec">Codec: --</span>
                </div>
            </div>
        </section>

        <!-- Control Section -->
        <section class="control-section">
            <h2>Robot Control</h2>
            <div id="joystick-container">
                <div id="joystick-base">
                    <div id="joystick-handle"></div>
                </div>
            </div>
            <div id="status">
                Status: Disconnected
            </div>
        </section>

        <!-- Statistics Section -->
        <section class="stats-section">
            <h2>Stream Statistics</h2>
            <div id="video-stats-content">
                <div class="stats-row">
                    <span class="stats-label">Frames Received:</span>
                    <span id="stats-frames">0</span>
                </div>
                <div class="stats-row">
                    <span class="stats-label">Frames Decoded:</span>
                    <span id="stats-decoded">0</span>
                </div>
                <div class="stats-row">
                    <span class="stats-label">Decode Errors:</span>
                    <span id="stats-errors">0</span>
                </div>
                <div class="stats-row">
                    <span class="stats-label">Error Rate:</span>
                    <span id="stats-error-rate">0%</span>
                </div>
                <div class="stats-row">
                    <span class="stats-label">Current FPS:</span>
                    <span id="stats-fps">--</span>
                </div>
                <div class="stats-row">
                    <span class="stats-label">Avg Frame Size:</span>
                    <span id="stats-frame-size">-- bytes</span>
                </div>
                <div class="stats-row">
                    <span class="stats-label">Key Frames:</span>
                    <span id="stats-key-frames">0</span>
                </div>
            </div>
        </section>

        <!-- Configuration Section -->
        <section class="config-section">
            <h2>System Configuration</h2>
            <div class="config-controls">
                <button id="load-config-btn">Load Current Config</button>
                <button id="save-config-btn">Save Configuration</button>
                <button id="toggle-config-btn">Show/Hide Config</button>
            </div>
            <div id="config-panel" class="config-panel hidden">
                <textarea id="config-yaml" rows="15" cols="50" placeholder="Click 'Load Current Config' or paste YAML here..."></textarea>
                <p id="config-status"></p>
            </div>
        </section>
    </main>

    <!-- Core libraries -->
    <script src="https://cdn.jsdelivr.net/npm/flatbuffers@25.2.10/js/flatbuffers.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jmuxer@2.0.7/dist/jmuxer.min.js"></script>

    <!-- Application Scripts -->
    <script src="js/api.js"></script>
    <script src="js/ui/teleop.js"></script>
    <script src="js/ui/video-simpler.js"></script>
    <script src="js/ui/config.js"></script>
    <script src="js/ui/dashboard.js"></script>

    <!-- Main orchestrating script -->
    <script src="js/main.js"></script>
</body>
</html> 